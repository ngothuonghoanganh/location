{"version":3,"file":"index.modern.js","sources":["../src/useShallowEqual.ts","../src/components/Context.tsx","../src/utils.ts","../src/useDrawEffect.ts","../src/components/Arc.tsx","../src/components/Circle.tsx","../src/components/Curve.tsx","../src/components/Ellipse.tsx","../src/components/Line.tsx","../src/components/LinerPath.tsx","../src/components/Path.tsx","../src/components/Polygon.tsx","../src/components/Rectangle.tsx","../src/components/RoughProvider.tsx"],"sourcesContent":["import * as React from 'react'\nimport shallowEqual from 'shallowequal'\n\nconst isEqual = (depsA: any[] = [], depsB: any[] = []) => {\n  if (depsA.length !== depsB.length) {\n    return false\n  }\n  return depsA.every((a, index) => shallowEqual(a, depsB[index]))\n}\nexport const useShallowEqual = (\n  f: React.EffectCallback, deps: any[],\n) => {\n  const ref = React.useRef([])\n  if (!isEqual(ref.current, deps)) {\n    ref.current = deps\n  }\n  React.useEffect(f, ref.current)\n}\n\nexport default useShallowEqual\n","import * as React from 'react'\nimport { RoughSVG } from 'roughjs/src/svg'\n\nexport interface ContextProps {\n  rough: RoughSVG,\n  root: SVGSVGElement | null\n}\n\n\nexport const Context = React.createContext<ContextProps>(null)\n","import { Handlers } from './baseTypes'\n\nexport const loopHandlers = (\n  node: SVGElement | HTMLElement,\n  fName: 'addEventListener' | 'removeEventListener',\n  handlers: Handlers,\n) => {\n  Object.keys(handlers).forEach((name) => {\n    const eventName = name.replace('on', '').toLowerCase()\n    node[fName](eventName, handlers[name])\n  })\n}\n","/* eslint-disable no-case-declarations */\nimport * as React from 'react'\nimport { RoughSVG } from 'roughjs/src/svg'\nimport * as d3Shape from 'd3-shape'\nimport { useShallowEqual } from './useShallowEqual'\nimport { Context } from './components/Context'\nimport { BaseOptions, RoughOptions } from './baseTypes'\nimport { loopHandlers } from './utils'\n\nexport type DrawFunction = 'line' | 'rectangle' | 'ellipse' | 'circle' | 'linearPath' | 'polygon' | 'arc' | 'curve' | 'path'\n\nconst createSvgNode = (tagName: string, attributes: any): SVGGElement => {\n  const common = {\n    opacity: '0',\n    fill: 'black',\n    stroke: 'black',\n  }\n  let attrs = {\n    ...common,\n    ...attributes,\n  }\n  const nsString = 'http://www.w3.org/2000/svg'\n  let newTagName = tagName\n  if (tagName === 'arc') {\n    newTagName = 'path'\n    const arc = d3Shape.arc()\n    const {\n      innerRadius, outerRadius, startAngle, endAngle, x, y, ...rest\n    } = attrs\n    const d = arc({\n      innerRadius: innerRadius || 0,\n      outerRadius: outerRadius || 0,\n      startAngle: startAngle || 0,\n      endAngle: endAngle || 0,\n    })\n    attrs = {\n      ...attrs,\n      ...rest,\n      d,\n      transform: `translate(${x}, ${y})`,\n    }\n  }\n  const node = document.createElementNS(nsString, newTagName)\n  Object.keys(attrs).forEach((attrName) => {\n    node.setAttribute(attrName, attrs[attrName])\n  })\n  return node as any\n}\nexport function useDrawEffect<T extends DrawFunction>(\n  drawFnName: T, deps: Parameters<RoughSVG[T]>, props: BaseOptions = {},\n) {\n  const value = React.useContext(Context)\n  const nodeRef = React.useRef<SVGGElement>(null)\n  const fakeNodeRef = React.useRef<SVGGElement>(null)\n\n  if (!value) {\n    throw Error('Wrap Component inside <RoughProvider>')\n  }\n  const creteFakeNode = () => {\n    switch (drawFnName) {\n      case 'rectangle':\n        return createSvgNode('rect', {\n          x: deps[0],\n          y: deps[1],\n          width: deps[2],\n          height: deps[3],\n        })\n      case 'path':\n        const pathOptions = (deps[1] || {}) as RoughOptions\n        return createSvgNode('path', {\n          d: deps[0],\n          fill: pathOptions.fill ? 'black' : 'none',\n        })\n      default:\n        const options = (deps[deps.length - 1] || {})\n        const newOptions: RoughOptions = {\n          ...(options as any),\n          fill: 'black',\n          fillStyle: 'solid',\n        }\n        const args = [...deps.slice(0, deps.length - 1), newOptions]\n        const node = (value.rough[drawFnName as any](...args as any) as SVGGElement)\n        node.setAttribute('opacity', '0')\n        return node\n    }\n  }\n  const {\n    transform, opacity, onClick, onMouseOut, onMouseOver,\n    cursor, strokeDasharray, onMouseMove,\n  } = props\n  const handlers = {\n    onClick, onMouseOut, onMouseOver, onMouseMove,\n  }\n  const setAttribute = (node: SVGGElement, attrs: object) => {\n    Object.keys(attrs).forEach((attrName) => {\n      if (attrName === 'strokeDasharray') {\n        node.setAttribute('stroke-dasharray', attrs[attrName])\n        return\n      }\n      if (attrs[attrName] !== undefined) {\n        node.setAttribute(attrName, attrs[attrName])\n      }\n    })\n  }\n\n  // Style Effect\n  React.useEffect(() => {\n    if (nodeRef.current) {\n      setAttribute(nodeRef.current, {\n        transform,\n        opacity,\n        cursor,\n        strokeDasharray,\n      })\n    }\n    if (fakeNodeRef.current) {\n      setAttribute(fakeNodeRef.current, {\n        transform,\n      })\n    }\n  }, [transform, opacity, cursor, strokeDasharray])\n  useShallowEqual(() => {\n    if (value.root) {\n      const node = (value.rough[drawFnName as any](...deps as any) as SVGGElement)\n      nodeRef.current = node\n      const fakeNode = creteFakeNode()\n      fakeNodeRef.current = fakeNode\n      setAttribute(node, {\n        transform,\n        opacity,\n        cursor,\n        strokeDasharray,\n      })\n      // NOTE node will be last child of its parent. Will cause some shadowing issues\n      value.root.appendChild(node)\n      if (fakeNode) {\n        loopHandlers(fakeNode, 'addEventListener', handlers)\n        setAttribute(fakeNode, {\n          transform,\n          cursor,\n        })\n        value.root.appendChild(fakeNode)\n      } else {\n        loopHandlers(node, 'addEventListener', handlers)\n      }\n      return () => {\n        nodeRef.current = null\n        value.root.removeChild(node)\n        if (fakeNode) {\n          fakeNodeRef.current = null\n          loopHandlers(fakeNode, 'removeEventListener', handlers)\n          value.root.removeChild(fakeNode)\n        } else {\n          loopHandlers(node, 'removeEventListener', handlers)\n        }\n      }\n    }\n    return () => { }\n  }, [value.root, ...deps])\n  return value\n}\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface ArcProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number,\n  start?: number,\n  stop?: number,\n  closed?: boolean\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  useDrawEffect('arc',\n    [props.x, props.y, props.width, props.height, props.start,\n      props.stop, props.closed, props.options], props)\n  return null\n}\n\nArc.displayName = 'Arc'\nArc.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  start: 0,\n  stop: Math.PI / 2,\n  closed: false,\n}\n\nexport default Arc\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\n\nexport interface CircleProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  diameter?: number\n}\nexport const Circle: React.FC<CircleProps> = (props) => {\n  useDrawEffect('circle', [props.x, props.y, props.diameter, props.options], props)\n  return null\n}\n\nCircle.displayName = 'Circle'\nCircle.defaultProps = {\n  x: 0,\n  y: 0,\n  diameter: 0,\n}\n\nexport default Circle\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface CurveProps extends BaseOptions {\n  points?: Point[]\n}\n\nexport const Curve: React.FC<CurveProps> = (props) => {\n  useDrawEffect('curve', [props.points, props.options], props)\n  return null\n}\n\nCurve.displayName = 'Curve'\nCurve.defaultProps = {\n  points: [[0, 0]], // NOTE\n}\n\nexport default Curve\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface EllipseProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number\n}\n\nexport const Ellipse: React.FC<EllipseProps> = (props) => {\n  const {\n    x, y, width, height, options,\n  } = props\n  useDrawEffect('ellipse', [x, y, width, height, options], props)\n  return null\n}\n\nEllipse.displayName = 'Ellipse'\nEllipse.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n}\n\nexport default Ellipse\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\n\nexport interface LineProps extends BaseOptions {\n  x1?: number,\n  x2?: number,\n  y1?: number,\n  y2?: number,\n}\n\nexport const Line: React.FC<LineProps> = (props) => {\n  const {\n    x1, x2, y1, y2, options,\n  } = props\n  useDrawEffect('line', [x1, y1, x2, y2, options], props)\n  return null\n}\n\nLine.displayName = 'Line'\nLine.defaultProps = {\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  y2: 0,\n}\n\nexport default Line\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface LinearPathProps extends BaseOptions {\n  points?: Point[]\n}\n\nexport const LinearPath: React.FC<LinearPathProps> = (props) => {\n  useDrawEffect('linearPath', [props.points, props.options], props)\n  return null\n}\n\nLinearPath.displayName = 'LinearPath'\nLinearPath.defaultProps = {\n  points: [],\n}\n\nexport default LinearPath\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface PathProps extends BaseOptions {\n  d?: string\n}\n\nexport const Path: React.FC<PathProps> = (props) => {\n  useDrawEffect('path', [props.d, props.options], props)\n  return null\n}\n\nPath.displayName = 'Path'\nPath.defaultProps = {\n  d: '',\n}\n\nexport default Path\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface PolygonProps extends BaseOptions {\n  vertices?: Point[]\n}\n\nexport const Polygon: React.FC<PolygonProps> = (props) => {\n  useDrawEffect('polygon', [props.vertices, props.options], props)\n  return null\n}\n\nPolygon.displayName = 'Polygon'\nPolygon.defaultProps = {\n  vertices: [],\n}\n\n\nexport default Polygon\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface RectangleProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number,\n}\n\nexport const Rectangle: React.FC<RectangleProps> = (props) => {\n  const {\n    x, y, width, height, options,\n  } = props\n  useDrawEffect('rectangle', [\n    x, y, width, height, options,\n  ], props)\n  return null\n}\n\nRectangle.displayName = 'Rectangle'\nRectangle.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n}\n\nexport default Rectangle\n","import * as React from 'react'\nimport roughjs from 'roughjs/dist/rough.umd'\nimport { Config as RoughConfig } from 'roughjs/src/core'\nimport { Context, ContextProps } from './Context'\n\nimport { RoughOptions } from '../baseTypes'\n\nexport interface Config extends RoughConfig {\n  options?: RoughOptions\n}\nexport interface RoughProviderProps extends React.SVGAttributes<SVGGElement> {\n  config?: Config\n}\n\n\nexport const RoughProvider: React.FC<RoughProviderProps> = (props: RoughProviderProps) => {\n  RoughProvider.displayName = 'RoughProvider'\n  const { Provider } = Context\n  const { config, ...rest } = props\n  const ref = React.useRef<SVGSVGElement>()\n  const [value, setValue] = React.useState<ContextProps>({ root: null, rough: null })\n  React.useEffect(() => {\n    setValue({\n      root: ref.current,\n      rough: roughjs.svg(ref.current, props.config),\n    })\n  }, [ref.current, config])\n  return (\n    <Provider\n      value={value}\n    >\n      <g\n        {...rest}\n        ref={ref}\n      />\n    </Provider>\n  )\n}\n"],"names":["isEqual","depsA","depsB","length","every","a","index","shallowEqual","useShallowEqual","f","deps","ref","React","current","Context","loopHandlers","node","fName","handlers","Object","keys","forEach","name","eventName","replace","toLowerCase","createSvgNode","tagName","attributes","common","opacity","fill","stroke","attrs","nsString","newTagName","arc","d3Shape","innerRadius","outerRadius","startAngle","endAngle","x","y","rest","d","transform","document","createElementNS","attrName","setAttribute","useDrawEffect","drawFnName","props","value","nodeRef","fakeNodeRef","Error","creteFakeNode","width","height","pathOptions","options","newOptions","fillStyle","args","slice","rough","onClick","onMouseOut","onMouseOver","cursor","strokeDasharray","onMouseMove","undefined","root","fakeNode","appendChild","removeChild","Arc","start","stop","closed","displayName","defaultProps","Math","PI","Circle","diameter","Curve","points","Ellipse","Line","x1","x2","y1","y2","LinearPath","Path","Polygon","vertices","Rectangle","RoughProvider","Provider","config","setValue","roughjs","svg"],"mappings":"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"}