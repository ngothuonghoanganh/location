{"version":3,"file":"index.umd.js","sources":["../src/useShallowEqual.ts","../src/components/Context.tsx","../src/utils.ts","../src/useDrawEffect.ts","../src/components/Arc.tsx","../src/components/Circle.tsx","../src/components/Curve.tsx","../src/components/Ellipse.tsx","../src/components/Line.tsx","../src/components/LinerPath.tsx","../src/components/Path.tsx","../src/components/Polygon.tsx","../src/components/Rectangle.tsx","../src/components/RoughProvider.tsx"],"sourcesContent":["import * as React from 'react'\nimport shallowEqual from 'shallowequal'\n\nconst isEqual = (depsA: any[] = [], depsB: any[] = []) => {\n  if (depsA.length !== depsB.length) {\n    return false\n  }\n  return depsA.every((a, index) => shallowEqual(a, depsB[index]))\n}\nexport const useShallowEqual = (\n  f: React.EffectCallback, deps: any[],\n) => {\n  const ref = React.useRef([])\n  if (!isEqual(ref.current, deps)) {\n    ref.current = deps\n  }\n  React.useEffect(f, ref.current)\n}\n\nexport default useShallowEqual\n","import * as React from 'react'\nimport { RoughSVG } from 'roughjs/src/svg'\n\nexport interface ContextProps {\n  rough: RoughSVG,\n  root: SVGSVGElement | null\n}\n\n\nexport const Context = React.createContext<ContextProps>(null)\n","import { Handlers } from './baseTypes'\n\nexport const loopHandlers = (\n  node: SVGElement | HTMLElement,\n  fName: 'addEventListener' | 'removeEventListener',\n  handlers: Handlers,\n) => {\n  Object.keys(handlers).forEach((name) => {\n    const eventName = name.replace('on', '').toLowerCase()\n    node[fName](eventName, handlers[name])\n  })\n}\n","/* eslint-disable no-case-declarations */\nimport * as React from 'react'\nimport { RoughSVG } from 'roughjs/src/svg'\nimport * as d3Shape from 'd3-shape'\nimport { useShallowEqual } from './useShallowEqual'\nimport { Context } from './components/Context'\nimport { BaseOptions, RoughOptions } from './baseTypes'\nimport { loopHandlers } from './utils'\n\nexport type DrawFunction = 'line' | 'rectangle' | 'ellipse' | 'circle' | 'linearPath' | 'polygon' | 'arc' | 'curve' | 'path'\n\nconst createSvgNode = (tagName: string, attributes: any): SVGGElement => {\n  const common = {\n    opacity: '0',\n    fill: 'black',\n    stroke: 'black',\n  }\n  let attrs = {\n    ...common,\n    ...attributes,\n  }\n  const nsString = 'http://www.w3.org/2000/svg'\n  let newTagName = tagName\n  if (tagName === 'arc') {\n    newTagName = 'path'\n    const arc = d3Shape.arc()\n    const {\n      innerRadius, outerRadius, startAngle, endAngle, x, y, ...rest\n    } = attrs\n    const d = arc({\n      innerRadius: innerRadius || 0,\n      outerRadius: outerRadius || 0,\n      startAngle: startAngle || 0,\n      endAngle: endAngle || 0,\n    })\n    attrs = {\n      ...attrs,\n      ...rest,\n      d,\n      transform: `translate(${x}, ${y})`,\n    }\n  }\n  const node = document.createElementNS(nsString, newTagName)\n  Object.keys(attrs).forEach((attrName) => {\n    node.setAttribute(attrName, attrs[attrName])\n  })\n  return node as any\n}\nexport function useDrawEffect<T extends DrawFunction>(\n  drawFnName: T, deps: Parameters<RoughSVG[T]>, props: BaseOptions = {},\n) {\n  const value = React.useContext(Context)\n  const nodeRef = React.useRef<SVGGElement>(null)\n  const fakeNodeRef = React.useRef<SVGGElement>(null)\n\n  if (!value) {\n    throw Error('Wrap Component inside <RoughProvider>')\n  }\n  const creteFakeNode = () => {\n    switch (drawFnName) {\n      case 'rectangle':\n        return createSvgNode('rect', {\n          x: deps[0],\n          y: deps[1],\n          width: deps[2],\n          height: deps[3],\n        })\n      case 'path':\n        const pathOptions = (deps[1] || {}) as RoughOptions\n        return createSvgNode('path', {\n          d: deps[0],\n          fill: pathOptions.fill ? 'black' : 'none',\n        })\n      default:\n        const options = (deps[deps.length - 1] || {})\n        const newOptions: RoughOptions = {\n          ...(options as any),\n          fill: 'black',\n          fillStyle: 'solid',\n        }\n        const args = [...deps.slice(0, deps.length - 1), newOptions]\n        const node = (value.rough[drawFnName as any](...args as any) as SVGGElement)\n        node.setAttribute('opacity', '0')\n        return node\n    }\n  }\n  const {\n    transform, opacity, onClick, onMouseOut, onMouseOver,\n    cursor, strokeDasharray, onMouseMove,\n  } = props\n  const handlers = {\n    onClick, onMouseOut, onMouseOver, onMouseMove,\n  }\n  const setAttribute = (node: SVGGElement, attrs: object) => {\n    Object.keys(attrs).forEach((attrName) => {\n      if (attrName === 'strokeDasharray') {\n        node.setAttribute('stroke-dasharray', attrs[attrName])\n        return\n      }\n      if (attrs[attrName] !== undefined) {\n        node.setAttribute(attrName, attrs[attrName])\n      }\n    })\n  }\n\n  // Style Effect\n  React.useEffect(() => {\n    if (nodeRef.current) {\n      setAttribute(nodeRef.current, {\n        transform,\n        opacity,\n        cursor,\n        strokeDasharray,\n      })\n    }\n    if (fakeNodeRef.current) {\n      setAttribute(fakeNodeRef.current, {\n        transform,\n      })\n    }\n  }, [transform, opacity, cursor, strokeDasharray])\n  useShallowEqual(() => {\n    if (value.root) {\n      const node = (value.rough[drawFnName as any](...deps as any) as SVGGElement)\n      nodeRef.current = node\n      const fakeNode = creteFakeNode()\n      fakeNodeRef.current = fakeNode\n      setAttribute(node, {\n        transform,\n        opacity,\n        cursor,\n        strokeDasharray,\n      })\n      // NOTE node will be last child of its parent. Will cause some shadowing issues\n      value.root.appendChild(node)\n      if (fakeNode) {\n        loopHandlers(fakeNode, 'addEventListener', handlers)\n        setAttribute(fakeNode, {\n          transform,\n          cursor,\n        })\n        value.root.appendChild(fakeNode)\n      } else {\n        loopHandlers(node, 'addEventListener', handlers)\n      }\n      return () => {\n        nodeRef.current = null\n        value.root.removeChild(node)\n        if (fakeNode) {\n          fakeNodeRef.current = null\n          loopHandlers(fakeNode, 'removeEventListener', handlers)\n          value.root.removeChild(fakeNode)\n        } else {\n          loopHandlers(node, 'removeEventListener', handlers)\n        }\n      }\n    }\n    return () => { }\n  }, [value.root, ...deps])\n  return value\n}\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface ArcProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number,\n  start?: number,\n  stop?: number,\n  closed?: boolean\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  useDrawEffect('arc',\n    [props.x, props.y, props.width, props.height, props.start,\n      props.stop, props.closed, props.options], props)\n  return null\n}\n\nArc.displayName = 'Arc'\nArc.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  start: 0,\n  stop: Math.PI / 2,\n  closed: false,\n}\n\nexport default Arc\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\n\nexport interface CircleProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  diameter?: number\n}\nexport const Circle: React.FC<CircleProps> = (props) => {\n  useDrawEffect('circle', [props.x, props.y, props.diameter, props.options], props)\n  return null\n}\n\nCircle.displayName = 'Circle'\nCircle.defaultProps = {\n  x: 0,\n  y: 0,\n  diameter: 0,\n}\n\nexport default Circle\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface CurveProps extends BaseOptions {\n  points?: Point[]\n}\n\nexport const Curve: React.FC<CurveProps> = (props) => {\n  useDrawEffect('curve', [props.points, props.options], props)\n  return null\n}\n\nCurve.displayName = 'Curve'\nCurve.defaultProps = {\n  points: [[0, 0]], // NOTE\n}\n\nexport default Curve\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface EllipseProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number\n}\n\nexport const Ellipse: React.FC<EllipseProps> = (props) => {\n  const {\n    x, y, width, height, options,\n  } = props\n  useDrawEffect('ellipse', [x, y, width, height, options], props)\n  return null\n}\n\nEllipse.displayName = 'Ellipse'\nEllipse.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n}\n\nexport default Ellipse\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\n\nexport interface LineProps extends BaseOptions {\n  x1?: number,\n  x2?: number,\n  y1?: number,\n  y2?: number,\n}\n\nexport const Line: React.FC<LineProps> = (props) => {\n  const {\n    x1, x2, y1, y2, options,\n  } = props\n  useDrawEffect('line', [x1, y1, x2, y2, options], props)\n  return null\n}\n\nLine.displayName = 'Line'\nLine.defaultProps = {\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  y2: 0,\n}\n\nexport default Line\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface LinearPathProps extends BaseOptions {\n  points?: Point[]\n}\n\nexport const LinearPath: React.FC<LinearPathProps> = (props) => {\n  useDrawEffect('linearPath', [props.points, props.options], props)\n  return null\n}\n\nLinearPath.displayName = 'LinearPath'\nLinearPath.defaultProps = {\n  points: [],\n}\n\nexport default LinearPath\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface PathProps extends BaseOptions {\n  d?: string\n}\n\nexport const Path: React.FC<PathProps> = (props) => {\n  useDrawEffect('path', [props.d, props.options], props)\n  return null\n}\n\nPath.displayName = 'Path'\nPath.defaultProps = {\n  d: '',\n}\n\nexport default Path\n","import * as React from 'react'\nimport { BaseOptions, Point } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface PolygonProps extends BaseOptions {\n  vertices?: Point[]\n}\n\nexport const Polygon: React.FC<PolygonProps> = (props) => {\n  useDrawEffect('polygon', [props.vertices, props.options], props)\n  return null\n}\n\nPolygon.displayName = 'Polygon'\nPolygon.defaultProps = {\n  vertices: [],\n}\n\n\nexport default Polygon\n","import * as React from 'react'\nimport { BaseOptions } from '../baseTypes'\nimport { useDrawEffect } from '../useDrawEffect'\n\nexport interface RectangleProps extends BaseOptions {\n  x?: number,\n  y?: number,\n  width?: number,\n  height?: number,\n}\n\nexport const Rectangle: React.FC<RectangleProps> = (props) => {\n  const {\n    x, y, width, height, options,\n  } = props\n  useDrawEffect('rectangle', [\n    x, y, width, height, options,\n  ], props)\n  return null\n}\n\nRectangle.displayName = 'Rectangle'\nRectangle.defaultProps = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n}\n\nexport default Rectangle\n","import * as React from 'react'\nimport roughjs from 'roughjs/dist/rough.umd'\nimport { Config as RoughConfig } from 'roughjs/src/core'\nimport { Context, ContextProps } from './Context'\n\nimport { RoughOptions } from '../baseTypes'\n\nexport interface Config extends RoughConfig {\n  options?: RoughOptions\n}\nexport interface RoughProviderProps extends React.SVGAttributes<SVGGElement> {\n  config?: Config\n}\n\n\nexport const RoughProvider: React.FC<RoughProviderProps> = (props: RoughProviderProps) => {\n  RoughProvider.displayName = 'RoughProvider'\n  const { Provider } = Context\n  const { config, ...rest } = props\n  const ref = React.useRef<SVGSVGElement>()\n  const [value, setValue] = React.useState<ContextProps>({ root: null, rough: null })\n  React.useEffect(() => {\n    setValue({\n      root: ref.current,\n      rough: roughjs.svg(ref.current, props.config),\n    })\n  }, [ref.current, config])\n  return (\n    <Provider\n      value={value}\n    >\n      <g\n        {...rest}\n        ref={ref}\n      />\n    </Provider>\n  )\n}\n"],"names":["isEqual","depsA","depsB","length","every","a","index","shallowEqual","useShallowEqual","f","deps","ref","React","current","Context","loopHandlers","node","fName","handlers","Object","keys","forEach","name","eventName","replace","toLowerCase","createSvgNode","tagName","attributes","common","opacity","fill","stroke","attrs","nsString","newTagName","arc","d3Shape","innerRadius","outerRadius","startAngle","endAngle","x","y","rest","d","transform","document","createElementNS","attrName","setAttribute","useDrawEffect","drawFnName","props","value","nodeRef","fakeNodeRef","Error","creteFakeNode","width","height","pathOptions","options","newOptions","fillStyle","args","slice","rough","onClick","onMouseOut","onMouseOver","cursor","strokeDasharray","onMouseMove","undefined","root","fakeNode","appendChild","removeChild","Arc","start","stop","closed","displayName","defaultProps","Math","PI","Circle","diameter","Curve","points","Ellipse","Line","x1","x2","y1","y2","LinearPath","Path","Polygon","vertices","Rectangle","RoughProvider","Provider","config","setValue","roughjs","svg"],"mappings":"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"}