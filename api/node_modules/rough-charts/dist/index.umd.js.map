{"version":3,"file":"index.umd.js","sources":["../src/ChartContext.tsx","../src/utils.ts","../src/hooks/useChartContext.ts","../src/components/XAxis.tsx","../src/components/YAxis.tsx","../src/hooks/useTooltipGenerator.ts","../src/components/BarSeries.tsx","../src/components/Arc.tsx","../src/components/ArcSeries.tsx","../src/components/Y0.tsx","../src/components/CircleSeries.tsx","../src/components/LineSeries.tsx","../src/components/Tooltip.tsx","../src/components/ChartProvider.tsx","../src/components/AreaSeries.tsx"],"sourcesContent":["import { RoughOptions } from 'react-roughjs'\nimport { ScaleBand, ScaleLinear } from 'd3-scale'\nimport * as React from 'react'\n\nexport type Margin = {\n  top?: number,\n  bottom?: number\n  left?: number\n  right?: number\n}\nexport type DataKey = 'xDataKey' | 'yDataKey' |\n'barDataKeys' | 'lineDataKeys' | 'circleDataKeys' | 'areaDataKeys'\n\nexport interface ScaleData<T> {\n  xDataKey?: keyof T\n  yDataKey?: keyof T\n  barDataKeys: (keyof T)[]\n  lineDataKeys: (keyof T)[]\n  circleDataKeys: (keyof T)[]\n  areaDataKeys: (keyof T)[]\n  internalXScale: ScaleBand<any> | ScaleLinear<any, any>\n  internalYScale: ScaleBand<any> | ScaleLinear<any, any>\n  xScale: ScaleBand<any> | ScaleLinear<any, any>\n  yScale: ScaleBand<any> | ScaleLinear<any, any>\n  userXScale?: any\n  userYScale?: any\n  barScale?: ScaleBand<any>\n}\nexport interface TooltipData<T = any> {\n  showToolTip: boolean\n  x: number\n  y: number\n  name: string,\n  value: string,\n  activeItem: T\n}\nexport type ScaleType = 'scaleLinear' | 'scaleBand'\n\nexport interface ChartContextArgument<T = any> {\n  data?: T[]\n  /** If it doesn't set, it will keep the same with parent width */\n  width?: number\n  /** if it doesn't set, it will keep the same with parent height */\n  height?: number\n  options?: RoughOptions\n  margin?: Margin\n  /**\n   * If it doesn't set, it will be d3.scaleBand().\n   * Passing a customized scale to override the default behavior. */\n  xScale?: any\n  /**\n  * If it doesn't set, it will be d3.scaleLiner().\n  * Passing a customized scale to override the default behavior. */\n  yScale?: any\n}\n\nexport interface ChartContextReturn<T = any> extends Required<ChartContextArgument<T>> {\n  contentHeight: number,\n  contentWidth: number,\n  scaleData: ScaleData<T>\n  setScaleData: (f: (scaleData: ScaleData<T>) => ScaleData<T>) => void\n  tooltipData: TooltipData<T>\n  setTooltipData: (f: (data: TooltipData<T>) => TooltipData<T>) => void\n}\n\n\nexport const ChartContext = React.createContext<ChartContextReturn>(null)\n\n\nexport default ChartContext\n","import * as React from 'react'\nimport { Scale } from './baseTypes'\n\nexport const isNil = x => x == null\n\nexport const isFunction = x => typeof x === 'function'\n\nexport const removeDuplicates = <T extends any>(xs: T[]) => { // eslint-disable-line\n  const res: any = {}\n  xs.forEach((key) => {\n    res[key] = true\n  })\n  return Object.keys(res)\n}\n\nexport const getBandWidth = (scale: Scale) => {\n  const ticks = ('ticks' in scale) ? scale.ticks() : scale.domain()\n  if (ticks.length <= 1) {\n    const [low, high] = scale.range()\n    return Math.abs(high - low)\n  }\n  return Math.abs(scale(ticks[1]) - scale(ticks[0]))\n}\n\nexport const processTooltipHandlers = (\n  child, handlers: { [key: string]: (e: any) => void },\n) => {\n  if (!React.isValidElement(child)) {\n    return null\n  }\n  const additionalProps = Object.entries(handlers)\n    .reduce((acc, [handlerName, f]) => {\n      if (child.props[handlerName]) {\n        acc[handlerName] = (e) => {\n          f(e)\n          child.props[handlerName](e)\n        }\n      } else {\n        acc[handlerName] = f\n      }\n      return acc\n    }, {})\n  return React.cloneElement(child, additionalProps)\n}\n\nexport const cloneElement = (\n  f: (displayName: string, props: object) => object,\n  child: any,\n) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n  const additionalProps = f(child.type.displayName, child.props)\n  Object.entries(additionalProps).forEach(([propName, value]) => {\n    if (propName === 'options') {\n      additionalProps[propName] = {\n        ...value,\n        ...child.props.options,\n      }\n      return\n    }\n    if (!isNil(child.props[propName])) {\n      additionalProps[propName] = child.props[propName]\n    }\n  })\n  return React.cloneElement(child, additionalProps)\n}\n// eslint-disable-next-line\nexport const mapChildren = (f: (displayName: string, props: object, index: number) => object, children: any): any => React.Children.map(children, (child, index) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n\n  return cloneElement(\n    (displayName, props) => f(displayName, props, index), child,\n  )\n})\n\nexport const filterChildren = (\n  f: (displayName: string, child: any, index: number) => any,\n  children: any,\n) => {\n  const result = []\n  React.Children.forEach(children, (child, index) => {\n    if (!React.isValidElement(child as any)) {\n      return\n    }\n    const { displayName } = child.type\n    if (f(displayName, child, index)) {\n      result.push(child)\n    }\n  })\n  return result\n}\n","import * as React from 'react'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ChartContextReturn,\n  DataKey, ScaleType, ScaleData,\n} from '../ChartContext'\nimport { isNil, removeDuplicates } from '../utils'\n\nconst getDomain = (type: ScaleType, values: number[]) => {\n  const min = Math.min(...values)\n  return (\n    type === 'scaleBand' ? values : [min > 0 ? 0 : min, Math.max(...values)]\n  )\n}\n\nexport function useChartContext<T extends object>(\n  props: ChartContextArgument<T>,\n  scaleKeyName?: DataKey,\n):\n  ChartContextReturn<T> & {\n    contentHeight: number, contentWidth: number\n  } {\n  const value = React.useContext<ChartContextReturn<T>>(ChartContext)\n  if (value === null) {\n    throw Error('Chart Components must be wrapped inside <ChartProvider>!')\n  }\n  const {\n    data, contentWidth, contentHeight,\n    setScaleData, scaleData,\n  } = value\n  const {\n    userXScale, userYScale, internalXScale, internalYScale,\n  } = scaleData\n  const { dataKey } = props as any\n  React.useEffect(() => {\n    if (!scaleKeyName) {\n      return\n    }\n\n    if (scaleKeyName === 'xDataKey') {\n      if (userXScale) {\n        userXScale.range([0, contentWidth])\n        setScaleData(prev => ({\n          ...prev,\n          xScale: userXScale,\n          xDataKey: dataKey,\n        }))\n        return\n      }\n      const values = data.map(d => d[dataKey])\n      internalXScale.range([0, contentWidth])\n\n      const domain = getDomain('scaleBand', values)\n      internalXScale.domain(domain)\n\n      setScaleData(prev => ({\n        ...prev,\n        [scaleKeyName]: dataKey,\n        xScale: internalXScale,\n      }))\n    }\n    if ((scaleKeyName === 'yDataKey') && dataKey) {\n      if (userYScale) {\n        userYScale.range([0, contentHeight])\n        setScaleData(prev => ({\n          ...prev,\n          yScale: userYScale,\n          yDataKey: dataKey,\n        }))\n      } else {\n        const values = data.map(d => d[dataKey])\n        internalYScale.range([0, contentHeight])\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        setScaleData(prev => ({\n          ...prev,\n          [scaleKeyName]: dataKey,\n          yScale: internalYScale,\n        }))\n      }\n    }\n    const getSeriesScaleData = (prev: ScaleData<T>) => {\n      const {\n        yDataKey,\n      } = prev\n      const prevDataKeys = prev[scaleKeyName] as string[]\n      const newDataKeys = prevDataKeys.indexOf(dataKey) > -1\n        ? prevDataKeys\n        : [...prevDataKeys, dataKey]\n      const newScaleData = {\n        ...prev,\n        [scaleKeyName]: newDataKeys,\n      }\n      const {\n        barDataKeys, lineDataKeys, circleDataKeys, areaDataKeys,\n      } = newScaleData\n\n      // TODO xScale\n      if (userYScale) {\n        userYScale.range([contentHeight, 0])\n        newScaleData.yScale = userYScale\n      } else {\n        const noneStackedValues = removeDuplicates(\n          [...lineDataKeys, ...barDataKeys, ...circleDataKeys],\n        ).reduce((acc, groupName) => {\n          acc.push(...data.map(item => +item[groupName]))\n          return acc\n        }, [])\n\n        const areaValues = data.map(\n          d => areaDataKeys.reduce((sum, key) => sum + (d[key] as any), 0),\n        )\n\n\n        const values = yDataKey\n          ? data.map(d => d[yDataKey])\n          : [...noneStackedValues, ...areaValues]\n\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        internalYScale.range([contentHeight, 0])\n        newScaleData.yScale = internalYScale\n      }\n      return newScaleData\n    }\n\n    if (scaleKeyName === 'barDataKeys') {\n      setScaleData((prev) => {\n        const newScaleData = getSeriesScaleData(prev)\n\n        const barScale = d3Scale\n          .scaleBand()\n          .domain(newScaleData[scaleKeyName] as string[])\n\n        newScaleData.barScale = barScale\n        return newScaleData\n      })\n    }\n    if (\n      (scaleKeyName === 'lineDataKeys')\n      || (scaleKeyName === 'circleDataKeys')\n      || (scaleKeyName === 'areaDataKeys')\n    ) {\n      setScaleData(prev => getSeriesScaleData(prev))\n    }\n  }, [scaleKeyName, dataKey, contentHeight, contentWidth, data])\n  const margin = {\n    ...value.margin,\n  }\n  const { width } = value\n  const { height } = value\n  return {\n    ...value,\n    width,\n    height,\n    contentWidth: width - margin.left - margin.right,\n    contentHeight: height - margin.top - margin.bottom,\n    options: {\n      ...(value.options),\n      ...(props.options || {}),\n    },\n    margin,\n    data: !isNil(props.data) ? props.data : value.data,\n    scaleData: value.scaleData,\n    setScaleData: value.setScaleData,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth } from '../utils'\n\nexport interface XAxisProps extends BaseChartComponentProps {\n  dataKey: string\n  tickSize?: number\n  fontSize?: number\n  format?: (tick: string) => string\n  tickCount?: number\n}\n\nexport const XAxis: React.FC<XAxisProps> = (props) => {\n  if (!props.dataKey) {\n    throw Error('dataKey of XAxisProps is required')\n  }\n  const {\n    options, contentHeight, contentWidth, scaleData,\n  } = useChartContext(props, 'xDataKey')\n  const { xScale } = scaleData\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  if (!xScale) {\n    return null\n  }\n\n  const ticks = ('ticks' in xScale) ? xScale.ticks(tickCount) : xScale.domain()\n  const bandwidth = getBandWidth(xScale)\n  const y = contentHeight\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={y}\n        x2={contentWidth + bandwidth / 2}\n        y2={y}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={xScale(t) + bandwidth / 2}\n              y1={y}\n              x2={xScale(t) + bandwidth / 2}\n              y2={y + tickSize}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={xScale(t) + bandwidth / 2}\n              y={y + tickSize + fontSize}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"middle\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nXAxis.displayName = 'XAxis'\nXAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default XAxis\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction } from '../utils'\n\nexport interface YAxisProps extends BaseChartComponentProps {\n  dataKey?: string\n  tickSize?: number\n  tickCount?: number\n  fontSize?: number\n  format?: (tick: string) => string\n}\n\nexport const YAxis: React.FC<YAxisProps> = (props) => {\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  const {\n    options, contentHeight, scaleData,\n  } = useChartContext(props, 'yDataKey')\n  const { yScale: scale } = scaleData\n  if (!scale) {\n    return null\n  }\n\n  const ticks = (scale as any).ticks ? (scale as any).ticks(tickCount) : scale.domain()\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={0}\n        x2={0}\n        y2={contentHeight}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={0 - tickSize}\n              x2={0}\n              y1={scale(t)}\n              y2={scale(t)}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={0 - tickSize}\n              y={scale(t) + fontSize / 3}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"end\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nYAxis.displayName = 'YAxis'\nYAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default YAxis\n","import { useChartContext } from './useChartContext'\n\n// https://stackoverflow.com/questions/6307307/click-mouse-position-with-scroll-in-javascript\n\nconst mousePositions = (event) => {\n  const IE = !!document.all\n  let x\n  let y\n\n  if (IE) {\n    x = event.clientX + document.body.scrollLeft\n    y = event.clientY + document.body.scrollTop\n  } else {\n    x = ((window as any).Event)\n      ? event.pageX\n      : event.clientX + (\n        document.documentElement.scrollLeft\n          ? document.documentElement.scrollLeft\n          : document.body.scrollLeft\n      )\n    y = ((window as any).Event)\n      ? event.pageY\n      : event.clientY + (\n        document.documentElement.scrollTop\n          ? document.documentElement.scrollTop\n          : document.body.scrollTop\n      )\n  }\n  return { x, y }\n}\nexport const useTooltipGenerator = (props: {\n  dataKey: string\n  [key: string]: any\n}) => {\n  const { dataKey } = props\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  const { setTooltipData } = useChartContext(props as any)\n  const generateHandlers = (\n    item,\n    content: { name: string, value: string } = { name: '', value: '' },\n  ) => ({\n    onMouseOver: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        name: content.name,\n        value: content.value,\n        activeItem: item,\n      }))\n    },\n    onMouseMove: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        activeItem: item,\n      }))\n    },\n    onMouseOut: () => {\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: false,\n      }))\n    },\n  })\n  return {\n    generateHandlers,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Rectangle, RectangleProps } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\nexport interface BarSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: string,\n  /** Use for handling event and rendering customized shapes/styles */\n  children?: (item: T, props: RectangleProps, index: number) => JSX.Element\n}\n\nexport const BarSeries  = <T extends object>(props: BarSeriesProps<T>) => { // eslint-disable-line\n  const {\n    dataKey, options,\n  } = props\n  const {\n    data, contentHeight, scaleData,\n  } = useChartContext(props, 'barDataKeys')\n  const {\n    xScale, barScale, yScale, xDataKey,\n  } = scaleData\n  const { generateHandlers } = useTooltipGenerator(props)\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  // TODO xDataKey\n  if (!xScale || !barScale || !yScale || !xDataKey) {\n    return null\n  }\n\n  const width = getBandWidth(xScale)\n  const offset = (width * 0.2) / 2\n  const generateChildProps = (item:T) => {\n    const x = xScale(item[xDataKey])\n    barScale\n      .range([x + offset, x + width - offset])\n    const min = yScale.domain()[0]\n    const y0 = yScale(0)\n    const itemY = yScale(item[dataKey])\n    const y = min >= 0 ? itemY : yScale(Math.max(item[dataKey], 0))\n    const height = min >= 0 ? contentHeight - itemY : Math.abs(y0 - itemY)\n    return {\n      x: barScale(dataKey),\n      y,\n      width: barScale.bandwidth(),\n      height,\n      options: {\n        fill: 'black',\n        ...options,\n      },\n    }\n  }\n  const { children } = props\n  return (\n    <React.Fragment>\n      {\n        data.map((item, index) => {\n          const handlers = generateHandlers(item, {\n            name: `${dataKey}`,\n            value: `${item[dataKey]}`,\n          })\n          const childProps = generateChildProps(item as T)\n          return isFunction(children)\n            ? processTooltipHandlers(children(item as T, childProps, index), handlers) : (\n              <Rectangle\n                key={index}\n                {...childProps}\n                {...handlers}\n              />\n            )\n        })\n      }\n    </React.Fragment>\n  )\n}\n\nBarSeries.displayName = 'BarSeries'\n\n\nexport default BarSeries\n","import * as React from 'react'\nimport { Path, PathProps } from 'react-roughjs'\nimport * as d3Shape from 'd3-shape'\n\nexport interface ArcProps extends Omit<PathProps, 'd'> {\n  innerRadius?: number\n  outerRadius?: number\n  startAngle?: number\n  endAngle?: number\n  padAngle?: number\n  cx?: number\n  cy?: number\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  const {\n    innerRadius, outerRadius,\n    startAngle, endAngle, padAngle, options,\n    cx, cy, ...rest\n  } = props\n  const a = d3Shape.arc()\n  const d = a({\n    innerRadius,\n    outerRadius,\n    startAngle,\n    endAngle,\n    padAngle,\n  })\n  return (\n    <Path\n      d={d}\n      transform={`translate(${cx}, ${cy})`}\n      options={options}\n      {...rest}\n    />\n  )\n}\n\nArc.displayName = 'RcArc'\nArc.defaultProps = {\n  innerRadius: 0,\n  outerRadius: 0,\n  startAngle: 0,\n}\n\nexport default Arc\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport {\n  isNil, isFunction, processTooltipHandlers,\n} from '../utils'\nimport { Arc, ArcProps } from './Arc'\n\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface ArcSeriesProps<T> extends BaseChartComponentProps {\n  dataKey: string\n  innerRadiusPercent?:number\n  outerRadiusPercent?:number\n  cx?: number\n  cy?: number\n  padAngle?: number\n  startAngle?: number\n  /** Default is Math.PI * 2 */\n  endAngle?: number\n  children?: (item: T, props: ArcProps, index: number) => React.ReactNode\n}\n\nexport const ArcSeries = <T extends object>(props: ArcSeriesProps<T>) => { // eslint-disable-line\n  const {\n    data, options, contentHeight, contentWidth,\n  } = useChartContext(props)\n  const { generateHandlers } = useTooltipGenerator(props)\n  const {\n    dataKey, cx, cy, innerRadiusPercent, outerRadiusPercent,\n    padAngle: padAngleProp,\n    startAngle: startAngleProp,\n    endAngle: endAngleProp, children,\n  } = props\n  const newCx = !isNil(cx) ? cx : contentWidth / 2\n  const newCy = !isNil(cy) ? cy : contentHeight / 2\n  const radius = Math.min(newCx, newCy)\n\n  const arcs = d3Shape.pie()\n    .startAngle(startAngleProp)\n    .padAngle(padAngleProp)\n    .endAngle(endAngleProp)(data.map(d => d[dataKey]))\n  const arcsData = arcs.map((arc) => {\n    const { startAngle, endAngle, padAngle } = arc\n    return {\n      innerRadius: radius * innerRadiusPercent,\n      outerRadius: radius * outerRadiusPercent,\n      startAngle,\n      endAngle,\n      padAngle,\n    }\n  })\n  const total: number = data.reduce((acc, d) => acc + d[dataKey], 0)\n  return (\n    <React.Fragment>\n      {arcsData.map((arcProps, index) => {\n        const item = data[index]\n        const percent = ((item[dataKey] / total) * 100).toPrecision(3)\n        const handlers = generateHandlers(item, {\n          name: `${dataKey} ${item[dataKey]}`,\n          value: `${percent}%`,\n        })\n        const childProps: ArcProps = {\n          ...arcProps,\n          cx: newCx,\n          cy: newCy,\n          options: {\n            fill: 'black',\n            ...options,\n          },\n        }\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(item, childProps, index), handlers)\n        }\n        return (\n          <Arc\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nArcSeries.displayName = 'ArcSeries'\nArcSeries.defaultProps = {\n  innerRadiusPercent: 0,\n  outerRadiusPercent: 1,\n  padAngle: 0,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n}\n\nexport default ArcSeries\n","import * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\n\nexport interface Y0Props extends BaseChartComponentProps {\n\n}\n\nexport const Y0: React.FC<Y0Props> = (props) => {\n  const { scaleData: { yScale }, contentWidth } = useChartContext(props)\n  if (!yScale) {\n    return null\n  }\n  return (\n    <Line\n      y1={yScale(0)}\n      y2={yScale(0)}\n      x1={0}\n      x2={contentWidth}\n      strokeDasharray=\"30\"\n      options={{\n        bowing: 0.2,\n        ...props.options,\n      }}\n    />\n  )\n}\n\nY0.displayName = 'Y0'\n\nexport default Y0\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Circle, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface CircleSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T,\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const CircleSeries = <T extends object>(props: CircleSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'circleDataKeys')\n  const {\n    xScale, yScale, xDataKey,\n  } = scaleData\n  const { dataKey } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n  const { children } = props\n  return (\n    <React.Fragment>\n      {points.map(([x, y], index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y,\n          diameter: 10,\n          options: {\n            ...options,\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nCircleSeries.displayName = 'CircleSeries'\n\nexport default CircleSeries\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth } from '../utils'\nimport { CircleSeries } from './CircleSeries'\n\n\nexport interface LineSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const LineSeries = <T extends object>(props: LineSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'lineDataKeys')\n  const { xScale, yScale, xDataKey } = scaleData\n  const { dataKey, curve } = props\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n\n  const line = d3Shape\n    .line()\n    .curve(curve)\n\n  const path = line(points)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={path}\n        options={options}\n      />\n      <CircleSeries\n        {...props}\n      />\n    </React.Fragment>\n  )\n}\n\nLineSeries.displayName = 'LineSeries'\n\nLineSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n}\n\nexport default LineSeries\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport { RoughProvider, Rectangle } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { isNil, isFunction } from '../utils'\n\nexport interface TooltipProps<T=any> extends Omit<BaseChartComponentProps, 'data'>{\n  width?:number,\n  height?: number\n  fontSize?: number,\n  /** Use for rendering customized content */\n  children?: (activeItem: T) => React.ReactNode\n}\n\n\nexport const Tooltip: React.FC<TooltipProps> = (props) => {\n  const {\n    tooltipData, setTooltipData, contentWidth, options,\n  } = useChartContext(props)\n  const {\n    x, y, showToolTip, name, value, activeItem,\n  } = tooltipData\n  const {\n    width: propsWidth, height, fontSize, children,\n  } = props\n  const [internalWidth, setWidth] = React.useState(120)\n  const textRef = React.useRef<SVGTextElement>()\n  const width = isNil(propsWidth) ? internalWidth : propsWidth\n  React.useEffect(() => {\n    const node = textRef.current\n    if (node) {\n      const { width: textWidth } = node.getBBox()\n      setWidth(textWidth + 30)\n    }\n  }, [textRef.current])\n  if (!showToolTip || !activeItem) {\n    return null\n  }\n  // TODO pintX pointY\n  const left = contentWidth - x < width + 20 ? x - 20 - width : x + 20\n  const ellipse = (s = '', length) => (s.length > length ? `${s.slice(0, length)}...` : s)\n  const renderChildren = () => {\n    const text = (s: string) => (\n      <text\n        ref={textRef}\n        textAnchor=\"middle\"\n        stroke=\"black\"\n        fill=\"black\"\n        x={width / 2}\n        y={height / 2 + fontSize / 3}\n      >\n        {s}\n      </text>\n    )\n\n    if (isFunction(children)) {\n      const content = children(activeItem)\n      return typeof content === 'string' ? text(content) : content\n    }\n    return text(`${ellipse(name, 20)}: ${ellipse(value, 5)}`)\n  }\n  const content = (\n    <div\n      style={{\n        position: 'absolute',\n        left,\n        top: y - height / 2,\n      }}\n    >\n      <svg\n        width={width + 4}\n        height={height + 4}\n      >\n        <g transform=\"translate(2, 2)\">\n          <RoughProvider>\n            <Rectangle\n              width={width}\n              height={height}\n              onMouseOver={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseMove={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseOut={() => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  showToolTip: false,\n                }))\n              }}\n              options={{\n                fill: 'white',\n                fillStyle: 'solid',\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n          </RoughProvider>\n          <RoughProvider>\n            {renderChildren()}\n          </RoughProvider>\n        </g>\n      </svg>\n    </div>\n  )\n\n  return ReactDOM.createPortal(content, document.body)\n}\n\nTooltip.displayName = 'Tooltip'\nTooltip.defaultProps = {\n  height: 40,\n  fontSize: 16,\n}\n\nexport default Tooltip\n","import * as React from 'react'\nimport { RoughProvider } from 'react-roughjs'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ScaleData, TooltipData,\n} from '../ChartContext'\nimport { isNil } from '../utils'\n\nconst { Provider } = ChartContext\nconst defaultMargin = {\n  top: 10, right: 10, bottom: 50, left: 50,\n}\n\nexport interface ChartProviderProps extends ChartContextArgument {\n  viewBox?: string;\n}\n\n/**\n * The `ChartProvider` is a root component for other components.\n */\nexport const ChartProvider: React.FC<ChartProviderProps> = (props) => {\n  const [innerHeight, setInnerHeight] = React.useState(0)\n  const [innerWidth, setInnerWidth] = React.useState(0)\n  const ref = React.useRef<SVGSVGElement>()\n  const internalXScale = d3Scale.scaleBand()\n  const internalYScale = d3Scale.scaleLinear()\n  const [scaleData, setScaleData] = React.useState<ScaleData<any>>({\n    barDataKeys: [],\n    lineDataKeys: [],\n    circleDataKeys: [],\n    areaDataKeys: [],\n    xScale: props.xScale || internalXScale,\n    yScale: props.yScale || internalYScale,\n    userXScale: props.xScale,\n    userYScale: props.yScale,\n    internalXScale,\n    internalYScale,\n  })\n  const [tooltipData, setTooltipData] = React.useState<TooltipData>({\n    x: -1,\n    y: -1,\n    showToolTip: false,\n    name: '',\n    value: '',\n    activeItem: null,\n  })\n\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      if (ref.current && (isNil(props.height) || isNil(props.width))) {\n        const boundingRect = ref.current.parentElement.getBoundingClientRect()\n        setInnerHeight(boundingRect.height)\n        setInnerWidth(boundingRect.width)\n      }\n    }\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [props.height, props.width, ref.current])\n\n\n  const height = !isNil(props.height) ? props.height : innerHeight\n  const width = !isNil(props.width) ? props.width : innerWidth\n\n  const { margin: propsMargin } = props\n  const margin = {\n    ...defaultMargin,\n    ...propsMargin,\n  }\n  const shouldRenderChildren = () => (height && width)\n  return (\n    <Provider\n      value={{\n        ...props as any,\n        height,\n        width,\n        margin,\n        scaleData,\n        setScaleData: f => setScaleData(f),\n        contentHeight: height - margin.bottom - margin.top,\n        contentWidth: width - margin.left - margin.right,\n        tooltipData,\n        setTooltipData: f => setTooltipData(f),\n      }}\n    >\n      <svg\n        height={height}\n        width={width}\n        ref={ref}\n        viewBox={props.viewBox}\n      >\n        <RoughProvider\n          transform={`translate(${margin.left}, ${margin.top})`}\n          config={{\n            options: props.options,\n          }}\n        >\n          {shouldRenderChildren() && props.children}\n        </RoughProvider>\n      </svg>\n    </Provider>\n  )\n}\n\nChartProvider.displayName = 'ChartProvider'\nChartProvider.defaultProps = {\n  data: [],\n  options: {},\n  margin: defaultMargin,\n}\n\nexport default RoughProvider\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps, Circle } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface AreaSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  padding?: number\n  /** For rendering customized vertex */\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const AreaSeries = <T extends object>(props: AreaSeriesProps<T>) => { // eslint-disable-line\n  const {\n    scaleData, data, options,\n  } = useChartContext(props, 'areaDataKeys')\n  const {\n    xScale, yScale, xDataKey, areaDataKeys,\n  } = scaleData\n  const {\n    dataKey, curve, children, padding,\n  } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n  const areaKeyIndex = areaDataKeys.indexOf(dataKey)\n  const calculateY = (d) => {\n    if (areaKeyIndex === 0) {\n      return {\n        y0: yScale(yScale.domain()[0]),\n        y1: yScale(d[dataKey]),\n      }\n    }\n    const sum = (keys = []) => keys.reduce((acc, key) => acc + d[key], 0)\n    return {\n      y0: yScale(sum(areaDataKeys.slice(0, areaKeyIndex))) - padding,\n      y1: yScale(sum(areaDataKeys.slice(0, areaKeyIndex + 1))),\n    }\n  }\n  const bandwidth = getBandWidth(xScale)\n  interface Position {\n    x: number\n    y0: number\n    y1: number\n  }\n  const positions: Position[] = data.map((item: any) => {\n    const { y0, y1 } = calculateY(item)\n    return {\n      x: xScale(item[xDataKey]),\n      y0,\n      y1,\n    }\n  })\n  const area = d3Shape.area<Position>()\n    .x(d => d.x)\n    .y1(d => d.y1)\n    .y0(d => d.y0)\n    .curve(curve as any)\n  const areaPath = area(positions)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={areaPath}\n        options={{\n          fill: options.stroke,\n          ...options,\n        }}\n      />\n      {positions.map(({ x, y1 }, index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y: y1,\n          diameter: 12,\n          options: {\n            fill: options.fill || options.stroke,\n            strokeWidth: 2,\n            fillStyle: 'solid',\n            stroke: 'white',\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nAreaSeries.displayName = 'LineSeries'\n\nAreaSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n  padding: 6,\n}\n\nexport default AreaSeries\n"],"names":["ChartContext","React","isNil","x","isFunction","removeDuplicates","xs","res","forEach","key","Object","keys","getBandWidth","scale","ticks","domain","length","range","low","high","Math","abs","processTooltipHandlers","child","handlers","additionalProps","entries","reduce","acc","handlerName","f","props","e","getDomain","type","values","min","max","useChartContext","scaleKeyName","value","Error","data","contentWidth","contentHeight","setScaleData","scaleData","userXScale","userYScale","internalXScale","internalYScale","dataKey","prev","xScale","xDataKey","map","d","yScale","yDataKey","getSeriesScaleData","prevDataKeys","newDataKeys","indexOf","newScaleData","barDataKeys","lineDataKeys","circleDataKeys","areaDataKeys","noneStackedValues","groupName","push","item","areaValues","sum","barScale","d3Scale","margin","width","height","left","right","top","bottom","options","XAxis","tickSize","fontSize","format","tickCount","bandwidth","y","Line","x1","y1","x2","y2","bowing","t","index","strokeWidth","stroke","fill","textAnchor","String","displayName","defaultProps","YAxis","mousePositions","event","IE","document","all","clientX","body","scrollLeft","clientY","scrollTop","window","Event","pageX","documentElement","pageY","useTooltipGenerator","setTooltipData","generateHandlers","content","name","onMouseOver","showToolTip","activeItem","onMouseMove","onMouseOut","BarSeries","offset","generateChildProps","y0","itemY","children","childProps","Rectangle","Arc","innerRadius","outerRadius","startAngle","endAngle","padAngle","cx","cy","rest","a","d3Shape","Path","transform","ArcSeries","innerRadiusPercent","outerRadiusPercent","padAngleProp","startAngleProp","endAngleProp","newCx","newCy","radius","arcs","arcsData","arc","total","arcProps","percent","toPrecision","PI","Y0","strokeDasharray","CircleSeries","points","diameter","Circle","LineSeries","curve","line","path","tension","Tooltip","tooltipData","propsWidth","internalWidth","setWidth","textRef","node","current","getBBox","textWidth","ellipse","s","slice","renderChildren","text","ref","style","position","RoughProvider","fillStyle","ReactDOM","Provider","defaultMargin","ChartProvider","innerHeight","setInnerHeight","innerWidth","setInnerWidth","handleResize","boundingRect","parentElement","getBoundingClientRect","addEventListener","removeEventListener","propsMargin","shouldRenderChildren","viewBox","config","AreaSeries","padding","areaKeyIndex","calculateY","positions","area","areaPath"],"mappings":"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"}