{"version":3,"file":"index.m.js","sources":["../src/ChartContext.tsx","../src/utils.ts","../src/hooks/useChartContext.ts","../src/components/XAxis.tsx","../src/components/YAxis.tsx","../src/hooks/useTooltipGenerator.ts","../src/components/BarSeries.tsx","../src/components/Arc.tsx","../src/components/ArcSeries.tsx","../src/components/Y0.tsx","../src/components/CircleSeries.tsx","../src/components/LineSeries.tsx","../src/components/Tooltip.tsx","../src/components/ChartProvider.tsx","../src/components/AreaSeries.tsx"],"sourcesContent":["import { RoughOptions } from 'react-roughjs'\nimport { ScaleBand, ScaleLinear } from 'd3-scale'\nimport * as React from 'react'\n\nexport type Margin = {\n  top?: number,\n  bottom?: number\n  left?: number\n  right?: number\n}\nexport type DataKey = 'xDataKey' | 'yDataKey' |\n'barDataKeys' | 'lineDataKeys' | 'circleDataKeys' | 'areaDataKeys'\n\nexport interface ScaleData<T> {\n  xDataKey?: keyof T\n  yDataKey?: keyof T\n  barDataKeys: (keyof T)[]\n  lineDataKeys: (keyof T)[]\n  circleDataKeys: (keyof T)[]\n  areaDataKeys: (keyof T)[]\n  internalXScale: ScaleBand<any> | ScaleLinear<any, any>\n  internalYScale: ScaleBand<any> | ScaleLinear<any, any>\n  xScale: ScaleBand<any> | ScaleLinear<any, any>\n  yScale: ScaleBand<any> | ScaleLinear<any, any>\n  userXScale?: any\n  userYScale?: any\n  barScale?: ScaleBand<any>\n}\nexport interface TooltipData<T = any> {\n  showToolTip: boolean\n  x: number\n  y: number\n  name: string,\n  value: string,\n  activeItem: T\n}\nexport type ScaleType = 'scaleLinear' | 'scaleBand'\n\nexport interface ChartContextArgument<T = any> {\n  data?: T[]\n  /** If it doesn't set, it will keep the same with parent width */\n  width?: number\n  /** if it doesn't set, it will keep the same with parent height */\n  height?: number\n  options?: RoughOptions\n  margin?: Margin\n  /**\n   * If it doesn't set, it will be d3.scaleBand().\n   * Passing a customized scale to override the default behavior. */\n  xScale?: any\n  /**\n  * If it doesn't set, it will be d3.scaleLiner().\n  * Passing a customized scale to override the default behavior. */\n  yScale?: any\n}\n\nexport interface ChartContextReturn<T = any> extends Required<ChartContextArgument<T>> {\n  contentHeight: number,\n  contentWidth: number,\n  scaleData: ScaleData<T>\n  setScaleData: (f: (scaleData: ScaleData<T>) => ScaleData<T>) => void\n  tooltipData: TooltipData<T>\n  setTooltipData: (f: (data: TooltipData<T>) => TooltipData<T>) => void\n}\n\n\nexport const ChartContext = React.createContext<ChartContextReturn>(null)\n\n\nexport default ChartContext\n","import * as React from 'react'\nimport { Scale } from './baseTypes'\n\nexport const isNil = x => x == null\n\nexport const isFunction = x => typeof x === 'function'\n\nexport const removeDuplicates = <T extends any>(xs: T[]) => { // eslint-disable-line\n  const res: any = {}\n  xs.forEach((key) => {\n    res[key] = true\n  })\n  return Object.keys(res)\n}\n\nexport const getBandWidth = (scale: Scale) => {\n  const ticks = ('ticks' in scale) ? scale.ticks() : scale.domain()\n  if (ticks.length <= 1) {\n    const [low, high] = scale.range()\n    return Math.abs(high - low)\n  }\n  return Math.abs(scale(ticks[1]) - scale(ticks[0]))\n}\n\nexport const processTooltipHandlers = (\n  child, handlers: { [key: string]: (e: any) => void },\n) => {\n  if (!React.isValidElement(child)) {\n    return null\n  }\n  const additionalProps = Object.entries(handlers)\n    .reduce((acc, [handlerName, f]) => {\n      if (child.props[handlerName]) {\n        acc[handlerName] = (e) => {\n          f(e)\n          child.props[handlerName](e)\n        }\n      } else {\n        acc[handlerName] = f\n      }\n      return acc\n    }, {})\n  return React.cloneElement(child, additionalProps)\n}\n\nexport const cloneElement = (\n  f: (displayName: string, props: object) => object,\n  child: any,\n) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n  const additionalProps = f(child.type.displayName, child.props)\n  Object.entries(additionalProps).forEach(([propName, value]) => {\n    if (propName === 'options') {\n      additionalProps[propName] = {\n        ...value,\n        ...child.props.options,\n      }\n      return\n    }\n    if (!isNil(child.props[propName])) {\n      additionalProps[propName] = child.props[propName]\n    }\n  })\n  return React.cloneElement(child, additionalProps)\n}\n// eslint-disable-next-line\nexport const mapChildren = (f: (displayName: string, props: object, index: number) => object, children: any): any => React.Children.map(children, (child, index) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n\n  return cloneElement(\n    (displayName, props) => f(displayName, props, index), child,\n  )\n})\n\nexport const filterChildren = (\n  f: (displayName: string, child: any, index: number) => any,\n  children: any,\n) => {\n  const result = []\n  React.Children.forEach(children, (child, index) => {\n    if (!React.isValidElement(child as any)) {\n      return\n    }\n    const { displayName } = child.type\n    if (f(displayName, child, index)) {\n      result.push(child)\n    }\n  })\n  return result\n}\n","import * as React from 'react'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ChartContextReturn,\n  DataKey, ScaleType, ScaleData,\n} from '../ChartContext'\nimport { isNil, removeDuplicates } from '../utils'\n\nconst getDomain = (type: ScaleType, values: number[]) => {\n  const min = Math.min(...values)\n  return (\n    type === 'scaleBand' ? values : [min > 0 ? 0 : min, Math.max(...values)]\n  )\n}\n\nexport function useChartContext<T extends object>(\n  props: ChartContextArgument<T>,\n  scaleKeyName?: DataKey,\n):\n  ChartContextReturn<T> & {\n    contentHeight: number, contentWidth: number\n  } {\n  const value = React.useContext<ChartContextReturn<T>>(ChartContext)\n  if (value === null) {\n    throw Error('Chart Components must be wrapped inside <ChartProvider>!')\n  }\n  const {\n    data, contentWidth, contentHeight,\n    setScaleData, scaleData,\n  } = value\n  const {\n    userXScale, userYScale, internalXScale, internalYScale,\n  } = scaleData\n  const { dataKey } = props as any\n  React.useEffect(() => {\n    if (!scaleKeyName) {\n      return\n    }\n\n    if (scaleKeyName === 'xDataKey') {\n      if (userXScale) {\n        userXScale.range([0, contentWidth])\n        setScaleData(prev => ({\n          ...prev,\n          xScale: userXScale,\n          xDataKey: dataKey,\n        }))\n        return\n      }\n      const values = data.map(d => d[dataKey])\n      internalXScale.range([0, contentWidth])\n\n      const domain = getDomain('scaleBand', values)\n      internalXScale.domain(domain)\n\n      setScaleData(prev => ({\n        ...prev,\n        [scaleKeyName]: dataKey,\n        xScale: internalXScale,\n      }))\n    }\n    if ((scaleKeyName === 'yDataKey') && dataKey) {\n      if (userYScale) {\n        userYScale.range([0, contentHeight])\n        setScaleData(prev => ({\n          ...prev,\n          yScale: userYScale,\n          yDataKey: dataKey,\n        }))\n      } else {\n        const values = data.map(d => d[dataKey])\n        internalYScale.range([0, contentHeight])\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        setScaleData(prev => ({\n          ...prev,\n          [scaleKeyName]: dataKey,\n          yScale: internalYScale,\n        }))\n      }\n    }\n    const getSeriesScaleData = (prev: ScaleData<T>) => {\n      const {\n        yDataKey,\n      } = prev\n      const prevDataKeys = prev[scaleKeyName] as string[]\n      const newDataKeys = prevDataKeys.indexOf(dataKey) > -1\n        ? prevDataKeys\n        : [...prevDataKeys, dataKey]\n      const newScaleData = {\n        ...prev,\n        [scaleKeyName]: newDataKeys,\n      }\n      const {\n        barDataKeys, lineDataKeys, circleDataKeys, areaDataKeys,\n      } = newScaleData\n\n      // TODO xScale\n      if (userYScale) {\n        userYScale.range([contentHeight, 0])\n        newScaleData.yScale = userYScale\n      } else {\n        const noneStackedValues = removeDuplicates(\n          [...lineDataKeys, ...barDataKeys, ...circleDataKeys],\n        ).reduce((acc, groupName) => {\n          acc.push(...data.map(item => +item[groupName]))\n          return acc\n        }, [])\n\n        const areaValues = data.map(\n          d => areaDataKeys.reduce((sum, key) => sum + (d[key] as any), 0),\n        )\n\n\n        const values = yDataKey\n          ? data.map(d => d[yDataKey])\n          : [...noneStackedValues, ...areaValues]\n\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        internalYScale.range([contentHeight, 0])\n        newScaleData.yScale = internalYScale\n      }\n      return newScaleData\n    }\n\n    if (scaleKeyName === 'barDataKeys') {\n      setScaleData((prev) => {\n        const newScaleData = getSeriesScaleData(prev)\n\n        const barScale = d3Scale\n          .scaleBand()\n          .domain(newScaleData[scaleKeyName] as string[])\n\n        newScaleData.barScale = barScale\n        return newScaleData\n      })\n    }\n    if (\n      (scaleKeyName === 'lineDataKeys')\n      || (scaleKeyName === 'circleDataKeys')\n      || (scaleKeyName === 'areaDataKeys')\n    ) {\n      setScaleData(prev => getSeriesScaleData(prev))\n    }\n  }, [scaleKeyName, dataKey, contentHeight, contentWidth, data])\n  const margin = {\n    ...value.margin,\n  }\n  const { width } = value\n  const { height } = value\n  return {\n    ...value,\n    width,\n    height,\n    contentWidth: width - margin.left - margin.right,\n    contentHeight: height - margin.top - margin.bottom,\n    options: {\n      ...(value.options),\n      ...(props.options || {}),\n    },\n    margin,\n    data: !isNil(props.data) ? props.data : value.data,\n    scaleData: value.scaleData,\n    setScaleData: value.setScaleData,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth } from '../utils'\n\nexport interface XAxisProps extends BaseChartComponentProps {\n  dataKey: string\n  tickSize?: number\n  fontSize?: number\n  format?: (tick: string) => string\n  tickCount?: number\n}\n\nexport const XAxis: React.FC<XAxisProps> = (props) => {\n  if (!props.dataKey) {\n    throw Error('dataKey of XAxisProps is required')\n  }\n  const {\n    options, contentHeight, contentWidth, scaleData,\n  } = useChartContext(props, 'xDataKey')\n  const { xScale } = scaleData\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  if (!xScale) {\n    return null\n  }\n\n  const ticks = ('ticks' in xScale) ? xScale.ticks(tickCount) : xScale.domain()\n  const bandwidth = getBandWidth(xScale)\n  const y = contentHeight\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={y}\n        x2={contentWidth + bandwidth / 2}\n        y2={y}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={xScale(t) + bandwidth / 2}\n              y1={y}\n              x2={xScale(t) + bandwidth / 2}\n              y2={y + tickSize}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={xScale(t) + bandwidth / 2}\n              y={y + tickSize + fontSize}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"middle\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nXAxis.displayName = 'XAxis'\nXAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default XAxis\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction } from '../utils'\n\nexport interface YAxisProps extends BaseChartComponentProps {\n  dataKey?: string\n  tickSize?: number\n  tickCount?: number\n  fontSize?: number\n  format?: (tick: string) => string\n}\n\nexport const YAxis: React.FC<YAxisProps> = (props) => {\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  const {\n    options, contentHeight, scaleData,\n  } = useChartContext(props, 'yDataKey')\n  const { yScale: scale } = scaleData\n  if (!scale) {\n    return null\n  }\n\n  const ticks = (scale as any).ticks ? (scale as any).ticks(tickCount) : scale.domain()\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={0}\n        x2={0}\n        y2={contentHeight}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={0 - tickSize}\n              x2={0}\n              y1={scale(t)}\n              y2={scale(t)}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={0 - tickSize}\n              y={scale(t) + fontSize / 3}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"end\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nYAxis.displayName = 'YAxis'\nYAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default YAxis\n","import { useChartContext } from './useChartContext'\n\n// https://stackoverflow.com/questions/6307307/click-mouse-position-with-scroll-in-javascript\n\nconst mousePositions = (event) => {\n  const IE = !!document.all\n  let x\n  let y\n\n  if (IE) {\n    x = event.clientX + document.body.scrollLeft\n    y = event.clientY + document.body.scrollTop\n  } else {\n    x = ((window as any).Event)\n      ? event.pageX\n      : event.clientX + (\n        document.documentElement.scrollLeft\n          ? document.documentElement.scrollLeft\n          : document.body.scrollLeft\n      )\n    y = ((window as any).Event)\n      ? event.pageY\n      : event.clientY + (\n        document.documentElement.scrollTop\n          ? document.documentElement.scrollTop\n          : document.body.scrollTop\n      )\n  }\n  return { x, y }\n}\nexport const useTooltipGenerator = (props: {\n  dataKey: string\n  [key: string]: any\n}) => {\n  const { dataKey } = props\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  const { setTooltipData } = useChartContext(props as any)\n  const generateHandlers = (\n    item,\n    content: { name: string, value: string } = { name: '', value: '' },\n  ) => ({\n    onMouseOver: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        name: content.name,\n        value: content.value,\n        activeItem: item,\n      }))\n    },\n    onMouseMove: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        activeItem: item,\n      }))\n    },\n    onMouseOut: () => {\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: false,\n      }))\n    },\n  })\n  return {\n    generateHandlers,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Rectangle, RectangleProps } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\nexport interface BarSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: string,\n  /** Use for handling event and rendering customized shapes/styles */\n  children?: (item: T, props: RectangleProps, index: number) => JSX.Element\n}\n\nexport const BarSeries  = <T extends object>(props: BarSeriesProps<T>) => { // eslint-disable-line\n  const {\n    dataKey, options,\n  } = props\n  const {\n    data, contentHeight, scaleData,\n  } = useChartContext(props, 'barDataKeys')\n  const {\n    xScale, barScale, yScale, xDataKey,\n  } = scaleData\n  const { generateHandlers } = useTooltipGenerator(props)\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  // TODO xDataKey\n  if (!xScale || !barScale || !yScale || !xDataKey) {\n    return null\n  }\n\n  const width = getBandWidth(xScale)\n  const offset = (width * 0.2) / 2\n  const generateChildProps = (item:T) => {\n    const x = xScale(item[xDataKey])\n    barScale\n      .range([x + offset, x + width - offset])\n    const min = yScale.domain()[0]\n    const y0 = yScale(0)\n    const itemY = yScale(item[dataKey])\n    const y = min >= 0 ? itemY : yScale(Math.max(item[dataKey], 0))\n    const height = min >= 0 ? contentHeight - itemY : Math.abs(y0 - itemY)\n    return {\n      x: barScale(dataKey),\n      y,\n      width: barScale.bandwidth(),\n      height,\n      options: {\n        fill: 'black',\n        ...options,\n      },\n    }\n  }\n  const { children } = props\n  return (\n    <React.Fragment>\n      {\n        data.map((item, index) => {\n          const handlers = generateHandlers(item, {\n            name: `${dataKey}`,\n            value: `${item[dataKey]}`,\n          })\n          const childProps = generateChildProps(item as T)\n          return isFunction(children)\n            ? processTooltipHandlers(children(item as T, childProps, index), handlers) : (\n              <Rectangle\n                key={index}\n                {...childProps}\n                {...handlers}\n              />\n            )\n        })\n      }\n    </React.Fragment>\n  )\n}\n\nBarSeries.displayName = 'BarSeries'\n\n\nexport default BarSeries\n","import * as React from 'react'\nimport { Path, PathProps } from 'react-roughjs'\nimport * as d3Shape from 'd3-shape'\n\nexport interface ArcProps extends Omit<PathProps, 'd'> {\n  innerRadius?: number\n  outerRadius?: number\n  startAngle?: number\n  endAngle?: number\n  padAngle?: number\n  cx?: number\n  cy?: number\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  const {\n    innerRadius, outerRadius,\n    startAngle, endAngle, padAngle, options,\n    cx, cy, ...rest\n  } = props\n  const a = d3Shape.arc()\n  const d = a({\n    innerRadius,\n    outerRadius,\n    startAngle,\n    endAngle,\n    padAngle,\n  })\n  return (\n    <Path\n      d={d}\n      transform={`translate(${cx}, ${cy})`}\n      options={options}\n      {...rest}\n    />\n  )\n}\n\nArc.displayName = 'RcArc'\nArc.defaultProps = {\n  innerRadius: 0,\n  outerRadius: 0,\n  startAngle: 0,\n}\n\nexport default Arc\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport {\n  isNil, isFunction, processTooltipHandlers,\n} from '../utils'\nimport { Arc, ArcProps } from './Arc'\n\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface ArcSeriesProps<T> extends BaseChartComponentProps {\n  dataKey: string\n  innerRadiusPercent?:number\n  outerRadiusPercent?:number\n  cx?: number\n  cy?: number\n  padAngle?: number\n  startAngle?: number\n  /** Default is Math.PI * 2 */\n  endAngle?: number\n  children?: (item: T, props: ArcProps, index: number) => React.ReactNode\n}\n\nexport const ArcSeries = <T extends object>(props: ArcSeriesProps<T>) => { // eslint-disable-line\n  const {\n    data, options, contentHeight, contentWidth,\n  } = useChartContext(props)\n  const { generateHandlers } = useTooltipGenerator(props)\n  const {\n    dataKey, cx, cy, innerRadiusPercent, outerRadiusPercent,\n    padAngle: padAngleProp,\n    startAngle: startAngleProp,\n    endAngle: endAngleProp, children,\n  } = props\n  const newCx = !isNil(cx) ? cx : contentWidth / 2\n  const newCy = !isNil(cy) ? cy : contentHeight / 2\n  const radius = Math.min(newCx, newCy)\n\n  const arcs = d3Shape.pie()\n    .startAngle(startAngleProp)\n    .padAngle(padAngleProp)\n    .endAngle(endAngleProp)(data.map(d => d[dataKey]))\n  const arcsData = arcs.map((arc) => {\n    const { startAngle, endAngle, padAngle } = arc\n    return {\n      innerRadius: radius * innerRadiusPercent,\n      outerRadius: radius * outerRadiusPercent,\n      startAngle,\n      endAngle,\n      padAngle,\n    }\n  })\n  const total: number = data.reduce((acc, d) => acc + d[dataKey], 0)\n  return (\n    <React.Fragment>\n      {arcsData.map((arcProps, index) => {\n        const item = data[index]\n        const percent = ((item[dataKey] / total) * 100).toPrecision(3)\n        const handlers = generateHandlers(item, {\n          name: `${dataKey} ${item[dataKey]}`,\n          value: `${percent}%`,\n        })\n        const childProps: ArcProps = {\n          ...arcProps,\n          cx: newCx,\n          cy: newCy,\n          options: {\n            fill: 'black',\n            ...options,\n          },\n        }\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(item, childProps, index), handlers)\n        }\n        return (\n          <Arc\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nArcSeries.displayName = 'ArcSeries'\nArcSeries.defaultProps = {\n  innerRadiusPercent: 0,\n  outerRadiusPercent: 1,\n  padAngle: 0,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n}\n\nexport default ArcSeries\n","import * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\n\nexport interface Y0Props extends BaseChartComponentProps {\n\n}\n\nexport const Y0: React.FC<Y0Props> = (props) => {\n  const { scaleData: { yScale }, contentWidth } = useChartContext(props)\n  if (!yScale) {\n    return null\n  }\n  return (\n    <Line\n      y1={yScale(0)}\n      y2={yScale(0)}\n      x1={0}\n      x2={contentWidth}\n      strokeDasharray=\"30\"\n      options={{\n        bowing: 0.2,\n        ...props.options,\n      }}\n    />\n  )\n}\n\nY0.displayName = 'Y0'\n\nexport default Y0\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Circle, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface CircleSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T,\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const CircleSeries = <T extends object>(props: CircleSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'circleDataKeys')\n  const {\n    xScale, yScale, xDataKey,\n  } = scaleData\n  const { dataKey } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n  const { children } = props\n  return (\n    <React.Fragment>\n      {points.map(([x, y], index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y,\n          diameter: 10,\n          options: {\n            ...options,\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nCircleSeries.displayName = 'CircleSeries'\n\nexport default CircleSeries\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth } from '../utils'\nimport { CircleSeries } from './CircleSeries'\n\n\nexport interface LineSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const LineSeries = <T extends object>(props: LineSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'lineDataKeys')\n  const { xScale, yScale, xDataKey } = scaleData\n  const { dataKey, curve } = props\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n\n  const line = d3Shape\n    .line()\n    .curve(curve)\n\n  const path = line(points)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={path}\n        options={options}\n      />\n      <CircleSeries\n        {...props}\n      />\n    </React.Fragment>\n  )\n}\n\nLineSeries.displayName = 'LineSeries'\n\nLineSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n}\n\nexport default LineSeries\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport { RoughProvider, Rectangle } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { isNil, isFunction } from '../utils'\n\nexport interface TooltipProps<T=any> extends Omit<BaseChartComponentProps, 'data'>{\n  width?:number,\n  height?: number\n  fontSize?: number,\n  /** Use for rendering customized content */\n  children?: (activeItem: T) => React.ReactNode\n}\n\n\nexport const Tooltip: React.FC<TooltipProps> = (props) => {\n  const {\n    tooltipData, setTooltipData, contentWidth, options,\n  } = useChartContext(props)\n  const {\n    x, y, showToolTip, name, value, activeItem,\n  } = tooltipData\n  const {\n    width: propsWidth, height, fontSize, children,\n  } = props\n  const [internalWidth, setWidth] = React.useState(120)\n  const textRef = React.useRef<SVGTextElement>()\n  const width = isNil(propsWidth) ? internalWidth : propsWidth\n  React.useEffect(() => {\n    const node = textRef.current\n    if (node) {\n      const { width: textWidth } = node.getBBox()\n      setWidth(textWidth + 30)\n    }\n  }, [textRef.current])\n  if (!showToolTip || !activeItem) {\n    return null\n  }\n  // TODO pintX pointY\n  const left = contentWidth - x < width + 20 ? x - 20 - width : x + 20\n  const ellipse = (s = '', length) => (s.length > length ? `${s.slice(0, length)}...` : s)\n  const renderChildren = () => {\n    const text = (s: string) => (\n      <text\n        ref={textRef}\n        textAnchor=\"middle\"\n        stroke=\"black\"\n        fill=\"black\"\n        x={width / 2}\n        y={height / 2 + fontSize / 3}\n      >\n        {s}\n      </text>\n    )\n\n    if (isFunction(children)) {\n      const content = children(activeItem)\n      return typeof content === 'string' ? text(content) : content\n    }\n    return text(`${ellipse(name, 20)}: ${ellipse(value, 5)}`)\n  }\n  const content = (\n    <div\n      style={{\n        position: 'absolute',\n        left,\n        top: y - height / 2,\n      }}\n    >\n      <svg\n        width={width + 4}\n        height={height + 4}\n      >\n        <g transform=\"translate(2, 2)\">\n          <RoughProvider>\n            <Rectangle\n              width={width}\n              height={height}\n              onMouseOver={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseMove={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseOut={() => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  showToolTip: false,\n                }))\n              }}\n              options={{\n                fill: 'white',\n                fillStyle: 'solid',\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n          </RoughProvider>\n          <RoughProvider>\n            {renderChildren()}\n          </RoughProvider>\n        </g>\n      </svg>\n    </div>\n  )\n\n  return ReactDOM.createPortal(content, document.body)\n}\n\nTooltip.displayName = 'Tooltip'\nTooltip.defaultProps = {\n  height: 40,\n  fontSize: 16,\n}\n\nexport default Tooltip\n","import * as React from 'react'\nimport { RoughProvider } from 'react-roughjs'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ScaleData, TooltipData,\n} from '../ChartContext'\nimport { isNil } from '../utils'\n\nconst { Provider } = ChartContext\nconst defaultMargin = {\n  top: 10, right: 10, bottom: 50, left: 50,\n}\n\nexport interface ChartProviderProps extends ChartContextArgument {\n  viewBox?: string;\n}\n\n/**\n * The `ChartProvider` is a root component for other components.\n */\nexport const ChartProvider: React.FC<ChartProviderProps> = (props) => {\n  const [innerHeight, setInnerHeight] = React.useState(0)\n  const [innerWidth, setInnerWidth] = React.useState(0)\n  const ref = React.useRef<SVGSVGElement>()\n  const internalXScale = d3Scale.scaleBand()\n  const internalYScale = d3Scale.scaleLinear()\n  const [scaleData, setScaleData] = React.useState<ScaleData<any>>({\n    barDataKeys: [],\n    lineDataKeys: [],\n    circleDataKeys: [],\n    areaDataKeys: [],\n    xScale: props.xScale || internalXScale,\n    yScale: props.yScale || internalYScale,\n    userXScale: props.xScale,\n    userYScale: props.yScale,\n    internalXScale,\n    internalYScale,\n  })\n  const [tooltipData, setTooltipData] = React.useState<TooltipData>({\n    x: -1,\n    y: -1,\n    showToolTip: false,\n    name: '',\n    value: '',\n    activeItem: null,\n  })\n\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      if (ref.current && (isNil(props.height) || isNil(props.width))) {\n        const boundingRect = ref.current.parentElement.getBoundingClientRect()\n        setInnerHeight(boundingRect.height)\n        setInnerWidth(boundingRect.width)\n      }\n    }\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [props.height, props.width, ref.current])\n\n\n  const height = !isNil(props.height) ? props.height : innerHeight\n  const width = !isNil(props.width) ? props.width : innerWidth\n\n  const { margin: propsMargin } = props\n  const margin = {\n    ...defaultMargin,\n    ...propsMargin,\n  }\n  const shouldRenderChildren = () => (height && width)\n  return (\n    <Provider\n      value={{\n        ...props as any,\n        height,\n        width,\n        margin,\n        scaleData,\n        setScaleData: f => setScaleData(f),\n        contentHeight: height - margin.bottom - margin.top,\n        contentWidth: width - margin.left - margin.right,\n        tooltipData,\n        setTooltipData: f => setTooltipData(f),\n      }}\n    >\n      <svg\n        height={height}\n        width={width}\n        ref={ref}\n        viewBox={props.viewBox}\n      >\n        <RoughProvider\n          transform={`translate(${margin.left}, ${margin.top})`}\n          config={{\n            options: props.options,\n          }}\n        >\n          {shouldRenderChildren() && props.children}\n        </RoughProvider>\n      </svg>\n    </Provider>\n  )\n}\n\nChartProvider.displayName = 'ChartProvider'\nChartProvider.defaultProps = {\n  data: [],\n  options: {},\n  margin: defaultMargin,\n}\n\nexport default RoughProvider\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps, Circle } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface AreaSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  padding?: number\n  /** For rendering customized vertex */\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const AreaSeries = <T extends object>(props: AreaSeriesProps<T>) => { // eslint-disable-line\n  const {\n    scaleData, data, options,\n  } = useChartContext(props, 'areaDataKeys')\n  const {\n    xScale, yScale, xDataKey, areaDataKeys,\n  } = scaleData\n  const {\n    dataKey, curve, children, padding,\n  } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n  const areaKeyIndex = areaDataKeys.indexOf(dataKey)\n  const calculateY = (d) => {\n    if (areaKeyIndex === 0) {\n      return {\n        y0: yScale(yScale.domain()[0]),\n        y1: yScale(d[dataKey]),\n      }\n    }\n    const sum = (keys = []) => keys.reduce((acc, key) => acc + d[key], 0)\n    return {\n      y0: yScale(sum(areaDataKeys.slice(0, areaKeyIndex))) - padding,\n      y1: yScale(sum(areaDataKeys.slice(0, areaKeyIndex + 1))),\n    }\n  }\n  const bandwidth = getBandWidth(xScale)\n  interface Position {\n    x: number\n    y0: number\n    y1: number\n  }\n  const positions: Position[] = data.map((item: any) => {\n    const { y0, y1 } = calculateY(item)\n    return {\n      x: xScale(item[xDataKey]),\n      y0,\n      y1,\n    }\n  })\n  const area = d3Shape.area<Position>()\n    .x(d => d.x)\n    .y1(d => d.y1)\n    .y0(d => d.y0)\n    .curve(curve as any)\n  const areaPath = area(positions)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={areaPath}\n        options={{\n          fill: options.stroke,\n          ...options,\n        }}\n      />\n      {positions.map(({ x, y1 }, index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y: y1,\n          diameter: 12,\n          options: {\n            fill: options.fill || options.stroke,\n            strokeWidth: 2,\n            fillStyle: 'solid',\n            stroke: 'white',\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nAreaSeries.displayName = 'LineSeries'\n\nAreaSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n  padding: 6,\n}\n\nexport default AreaSeries\n"],"names":["ChartContext","React","isNil","x","isFunction","removeDuplicates","xs","res","forEach","key","Object","keys","getBandWidth","scale","ticks","domain","length","range","low","high","Math","abs","processTooltipHandlers","child","handlers","additionalProps","entries","reduce","acc","handlerName","f","props","e","getDomain","type","values","min","max","useChartContext","scaleKeyName","value","Error","data","contentWidth","contentHeight","setScaleData","scaleData","userXScale","userYScale","internalXScale","internalYScale","dataKey","prev","xScale","xDataKey","map","d","yScale","yDataKey","getSeriesScaleData","prevDataKeys","newDataKeys","indexOf","newScaleData","barDataKeys","lineDataKeys","circleDataKeys","areaDataKeys","noneStackedValues","groupName","push","item","areaValues","sum","barScale","d3Scale","margin","width","height","left","right","top","bottom","options","XAxis","tickSize","fontSize","format","tickCount","bandwidth","y","Line","x1","y1","x2","y2","bowing","t","index","strokeWidth","stroke","fill","textAnchor","String","displayName","defaultProps","YAxis","mousePositions","event","IE","document","all","clientX","body","scrollLeft","clientY","scrollTop","window","Event","pageX","documentElement","pageY","useTooltipGenerator","setTooltipData","generateHandlers","content","name","onMouseOver","showToolTip","activeItem","onMouseMove","onMouseOut","BarSeries","offset","generateChildProps","y0","itemY","children","childProps","Rectangle","Arc","innerRadius","outerRadius","startAngle","endAngle","padAngle","cx","cy","rest","a","d3Shape","Path","transform","ArcSeries","innerRadiusPercent","outerRadiusPercent","padAngleProp","startAngleProp","endAngleProp","newCx","newCy","radius","arcs","arcsData","arc","total","arcProps","percent","toPrecision","PI","Y0","strokeDasharray","CircleSeries","points","diameter","Circle","LineSeries","curve","line","path","tension","Tooltip","tooltipData","propsWidth","internalWidth","setWidth","textRef","node","current","getBBox","textWidth","ellipse","s","slice","renderChildren","text","ref","style","position","RoughProvider","fillStyle","ReactDOM","Provider","defaultMargin","ChartProvider","innerHeight","setInnerHeight","innerWidth","setInnerWidth","handleResize","boundingRect","parentElement","getBoundingClientRect","addEventListener","removeEventListener","propsMargin","shouldRenderChildren","viewBox","config","AreaSeries","padding","areaKeyIndex","calculateY","positions","area","areaPath"],"mappings":"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"}